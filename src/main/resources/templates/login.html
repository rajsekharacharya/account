<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
    xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>Login | SRMPS </title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <!-- linking master css file -->
    <link href="assets/css/site.css" rel="stylesheet" />
    <!-- linking fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap"
        rel="stylesheet">

    <link rel="shortcut icon" href="assets/icons/fav-icon/favicon.ico" />

    <style>
        @import url('https://fonts.googleapis.com/css?family=Raleway:400,700');

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            overflow: hidden;
        }

        body {
            font-family: "Open Sans", sans-serif;
            background-position: center;
            height: 100vh;
            overflow: hidden;
            position: relative;
            background-image: url(assets/images/srmps-login-bg.webp);
            background-size: cover;
            background-position: center;
        }

        .login-logo {
            position: absolute;
            top: 30px;
            left: 30px;
            z-index: 99;
        }

        .login-area,
        .image-area {
            justify-content: center;
            align-content: center;
        }

        .login-area {
            position: relative;
            height: 100vh;
            padding: 30px;
        }

        .image-area {
            background: #509ADF;
            position: relative;
            height: 100vh;
            transform: scale(1, 1);
            z-index: 9;
        }

        .img-login {
            width: 85%;
        }

        .login-form-container {
            width: 478px;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 60px 34px 54px;
            background: #FFFFFF;
            box-shadow: 0px 0px 15px #00000040;
            border-radius: 42px;

        }

        .login-form-container,
        .login-image-container {
            z-index: 99;
            /* padding: 10px; */
        }

        .brand-header {
            font-style: normal;
            font-weight: 700;
            font-size: 28px;
            line-height: 38px;
            letter-spacing: 0.06em;
            text-transform: capitalize;
            color: #8B373C;
            margin-bottom: 48px;
        }

        .login-header {
            font-style: normal;
            font-weight: 600;
            font-size: 22px;
            line-height: 30px;
            color: #252525;
            min-height: 44px;
        }

        .login-sub-header {
            font-weight: 400;
            font-size: 15px;
            line-height: 20px;
            color: #757575;
            min-height: 44px;
        }

        .login-image-header {
            color: #fff;
            font-weight: 700;
            font-size: 30px;
            letter-spacing: 5px;
            text-align: center;
            margin-bottom: 15px;
        }

        .login-image-sub-header {
            color: #99C9EE;
            font-weight: 700;
            font-size: 14px;
            letter-spacing: 2px;
            text-align: center;
        }

        .btn {
            height: 54px;
            border-radius: 14px;
            font-weight: 600;
            font-size: 22px;
            line-height: 27px;
            text-transform: capitalize;
            color: #FFFFFF;
        }

        .btn-primary {
            background-color: #0054A0;
            border-color: #0054A0;
        }

        .btn-primary:hover,
        .btn-primary:active,
        .btn-primary:focus {
            background-color: #0054A0;
            border-color: #0054A0;
        }

        .btn-primary:focus {
            box-shadow: 0 0 0 0.25rem #0054A063;
        }

        a {
            text-decoration: none;
        }

        .link-label-container {
            min-height: 24px;
            margin-top: 30px;
        }

        .form-check-label,
        .lbl-forgot-pass,
        .form-link-secondary {
            font-size: 14px;
            cursor: pointer;
        }

        .lbl-forgot-pass {
            font-weight: 500;
            font-size: 16px;
            line-height: 19px;
            text-transform: capitalize;
            color: #0054A0;
            display: block;
            margin-bottom: 45px;
        }

        .lbl-privacy-policy {
            text-decoration: none;
            font-weight: 500;
            font-size: 16px;
            line-height: 19px;
            text-transform: capitalize;
            color: #818181;

            &:hover {
                color: #3f3f3f;
            }
        }

        .form-check-label,
        .form-link-secondary {
            color: #909090;
        }

        .form-check-label:hover,
        .form-link-secondary:hover {
            color: #1f1e1e;
        }

        .form-link-secondary {
            display: inile-flex;
            align-items: center;
            justify-content: center;
        }

        .form-label {
            font-weight: 500;
            font-size: 18px;
            line-height: 22px;
            text-transform: capitalize;
            color: #333333;
            margin-bottom: 24px;
        }

        /* .form-check-label:hover, .lbl-forgot-pass:hover, .form-link-secondary:hover { } */
        .icon-common {
            mask-repeat: no-repeat;
            -webkit-mask-repeat: no-repeat;
            mask-position: center;
            -webkit-mask-position: center;
            mask-size: 100%;
            -webkit-mask-size: 100%;
            display: inline-block;
            vertical-align: middle;
            text-align: center;
        }

        .icon-form,
        .icon-form-before {
            height: 22px;
            width: 22px;
            cursor: pointer;
            position: absolute;
        }

        .icon-header-container {
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-right: 6px;
            width: 35px;
            height: 35px;
            background-color: #FEF6D9;
        }

        .icon-header,
        .icon-link-label {
            height: 18px;
            width: 18px;
        }

        .icon-link-label {
            margin-right: 6px;
        }

        .icon-form {
            right: 15px;
            top: 12px;
            background-color: #817F7F;
        }

        .icon-form-before {
            background-color: #015B99;
            left: 15px;
            top: 12px;
        }

        .icon-toggle-pass {
            mask-image: url(assets/icons/eye-fill.svg) !important;
            -webkit-mask-image: url(assets/icons/eye-fill.svg) !important;
        }

        .icon-toggle-pass-slash {
            mask-image: url(assets/icons/eye-slash-fill.svg);
            -webkit-mask-image: url(assets/icons/eye-slash-fill.svg);
        }

        .icon-user {
            mask-image: url(assets/icons/user-fill.svg);
            -webkit-mask-image: url(assets/icons/user-fill.svg);
        }

        .icon-email {
            mask-image: url(assets/icons/email.svg);
            -webkit-mask-image: url(assets/icons/email.svg);
        }

        .icon-telephone {
            mask-image: url(assets/icons/telephone.svg);
            -webkit-mask-image: url(assets/icons/telephone.svg);
        }

        .icon-lock {
            mask-image: url(assets/icons/lock.svg);
            -webkit-mask-image: url(assets/icons/lock.svg);
        }

        .icon-lock-fill {
            mask-image: url(assets/icons/lock-fill.svg);
            -webkit-mask-image: url(assets/icons/lock-fill.svg);
        }

        .icon-key {
            mask-image: url(assets/icons/key-fill.svg);
            -webkit-mask-image: url(assets/icons/key-fill.svg);
        }

        .icon-header.icon-lock-fill {
            background-color: #BA9205;
        }

        .icon-arrow-left {
            mask-image: url(assets/icons/arrow-left.svg);
            -webkit-mask-image: url(assets/icons/arrow-left.svg);
        }

        .form-link-secondary .icon-arrow-left {
            background-color: #909090;
        }

        .form-link-secondary:hover .icon-arrow-left {
            background-color: #1f1e1e;
        }

        .icon-exclamation {
            mask-image: url(assets/icons/exclamation-circle.svg);
            -webkit-mask-image: url(assets/icons/exclamation-circle.svg);
            background-color: #BD1111;
            height: 18px;
            width: 18px;
        }

        .form-control {
            padding: 0.75rem 0.75rem 0.75rem 3rem;
            border-radius: 12px;
            border: 1px solid #949494;
            background-color: #fff !important;
            font-size: 14px;
        }

        .login-error .form-control {
            border-color: #BD1111;
        }

        .login-error .form-control:focus {
            box-shadow: 0 0 0 0.25rem #bd11113f;
        }

        .error-msg-container {
            opacity: 0;
            pointer-events: none;
            margin-bottom: 15px;
        }

        .login-error .error-msg-container {
            opacity: 1;
        }

        .lbl-login-error {
            color: #BD1111;
            font-size: 14px;
        }

        .area-container {
            position: relative;
        }

        .lbl-ellipsis {
            white-space: nowrap;
            overflow: hidden !important;
            text-overflow: ellipsis;
        }

        .lbl-confirmation-modal {
            color: #313131;
            text-align: center;
            font-size: 16px;
            font-weight: 400;
            line-height: 26px;
            letter-spacing: 0.6px;
        }

        .btn-modal {
            width: 72px;
        }

        .img-success {
            width: 60px;
        }

        /* @media (max-width: 1199px) {
            body {
                background: unset;
            }
        } */

        @media (max-width: 991px) {
            .login-form-container {
                z-index: 99999;
            }
        }

        @media (max-width: 576px) {
            .login-form-container {
                width: auto;
            }

            .brand-header {
                font-size: 26px;
                margin-bottom: 50px;
            }

            .login-header {
                font-size: 20px;
                margin-bottom: 12px;
            }
        }

        @media (max-width: 300px) {
            .brand-header {
                font-size: 22px;
                margin-bottom: 30px;
            }

            .login-header {
                font-size: 18px;
            }
        }

        .modal-backdrop {
            z-index: 999999;
        }

        .modal {
            z-index: 9999999;
        }
    </style>
    
</head>

<body>

    <div th:if="${param.error}" id="loginError"></div>

    <!-- new page -->
    <!-- <img src="assets/images/logo.png" alt="" class="login-logo" /> -->

    <div class="area-container" id="loginArea" ng-app="ForgotPasswordManagement" ng-controller="ForgotPasswordController">
        <div class="row">
            <div class="col-12 login-area d-grid">
                <!-- login-form -->
                <div class="login-form-container" id="dvLogin">
                    <div class="brand-header lbl-ellipsis">SRMPS</div>
                    <div class="login-header">Login to your account</div>
                    <div class="login-sub-header">Enter your username & password to login</div>
                    <div class="error-msg-container">
                        <span class="icon-common icon-exclamation me-1"></span>
                        <span class="lbl-login-error" th:text="${session.loginError}"></span>
                        <!-- <span class="lbl-login-error">Invalid Username Or Password</span> -->
                    </div>
                    <form class="" th:action="@{/login}" method="post" id="loginform" autocomplete="off">
                        <label for="userName" class="form-label">Username</label>
                        <div class="mb-4 position-relative">
                            <span class="icon-common icon-user icon-form-before"></span>
                            <input type="text" class="form-control" id="userName" aria-describedby="emailHelp"
                                name="username" required value="" placeholder="Enter Username" />
                        </div>
                        <label for="idPassword" class="form-label">Password</label>
                        <div class="mb-4 position-relative">
                            <span class="icon-common icon-lock icon-form-before"></span>
                            <input type="password" class="form-control" id="idPassword" name="password" required
                                value="" placeholder="Password" />
                            <span class="icon-common icon-toggle-pass-slash icon-form" id="togglePassword"></span>
                        </div>
                        <div class="row mb-3">
                            <div class="col-12">
                                <a class="lbl-forgot-pass" id="linkForgetPass">Forgot Password?</a>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary w-100 mb-3">
                            Login
                        </button>
                        <div class="link-label-container text-center">
                            <a href="privacy-policy" class="lbl-privacy-policy">Privacy Policy</a>
                        </div>
                    </form>
                </div>

                <!-- forget-pass-form -->
                <div class="login-form-container d-none" id="dvForgetPass">
                    <div class="brand-header lbl-ellipsis">Reset Password</div>
                    <div class="login-header lbl-ellipsis">
                        <span class="icon-header-container"><span
                                class="icon-common icon-header icon-lock-fill"></span></span>
                        <span>Forgot Password?</span>
                    </div>
                    <div class="login-sub-header">
                        Don't Worry, Enter Your Details Below to Get New Password
                    </div>
                    <div class="error-msg-container">
                        <span class="icon-common icon-exclamation me-1"></span>
                        <span class="lbl-login-error">Invalid Username Or Password</span>
                    </div>
                    <form class="" ng-submit="submitForm()" method="post" id="resetform">
                        <div class="mb-4 position-relative">
                            <span class="icon-common icon-user icon-form-before"></span>
                            <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp"
                                name="username" required placeholder="Username" ng-model="form.username" />
                        </div>
                        <div class="mb-4 position-relative">
                            <span class="icon-common icon-email icon-form-before"></span>
                            <input type="email" class="form-control" aria-describedby="emailHelp" name="email" required
                                placeholder="Email" ng-model="form.email" />
                        </div>

                        <button ng-if="!otpSent" type="button" class="btn btn-primary w-100 mb-3" ng-click="sendOTP()">
                            Send OTP
                        </button>

                        <div ng-if="otpSent" class="mb-4 position-relative">
                            <span class="icon-common icon-key icon-form-before"></span>
                            <input type="text" class="form-control" id="" name="otp" required placeholder="OTP"
                                ng-model="form.otp" />
                        </div>
                        <div ng-if="otpSent" class="mb-4 position-relative">
                            <span class="icon-common icon-lock icon-form-before"></span>
                            <input type="{{ showPassword ? 'text' : 'password' }}" class="form-control"
                                placeholder="Password" ng-model="form.password" />
                        </div>
                        <div ng-if="otpSent" class="mb-4 position-relative">
                            <span class="icon-common icon-lock icon-form-before"></span>
                            <input type="{{ showPassword ? 'text' : 'password' }}" class="form-control"
                                placeholder="Confirm Password" ng-model="form.confirmPassword" />
                        </div>
                        <button ng-if="otpSent" type="submit" class="btn btn-primary w-100 mb-3">
                            Reset Password
                        </button>
                        <div class="text-center link-label-container">
                            <a class="form-link-secondary" id="linkBackToLogin">
                                <span class="icon-common icon-link-label icon-arrow-left"></span>
                                <span>Back To Login</span>
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.2/angular.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="private/forgot-password.js"></script>
    <script>
        (function () {
            const togglePassword = document.querySelector("#togglePassword");
            const password = document.querySelector("#idPassword");

            togglePassword.addEventListener("click", function (e) {
                // toggle the type attribute
                const type =
                    password.getAttribute("type") === "password" ? "text" : "password";
                password.setAttribute("type", type);
                // toggle the eye slash icon
                this.classList.toggle("icon-toggle-pass");
            });
        })();

        // Check if the element is present
        if (document.getElementById("loginError")) {
            // Add class to another element
            var loginArea = document.getElementById("loginArea");
            loginArea.classList.add("login-error");
        }
        var dvLogin = document.getElementById("dvLogin");
        var dvForgetPass = document.getElementById("dvForgetPass");
        var linkForgetPass = document.getElementById("linkForgetPass");
        var linkBackToLogin = document.getElementById("linkBackToLogin");

        //hiding login form and opening forget pass form
        linkForgetPass.onclick = function () {
            dvLogin.classList.add("d-none");
            dvForgetPass.classList.remove("d-none");
            loginArea.classList.remove("login-error");
        };

        //hiding forget pass form and opening login form
        linkBackToLogin.onclick = function () {
            dvForgetPass.classList.add("d-none");
            dvLogin.classList.remove("d-none");
        };
    </script>
</body>

</html>